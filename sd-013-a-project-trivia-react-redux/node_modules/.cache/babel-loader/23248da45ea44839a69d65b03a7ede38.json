{"ast":null,"code":"var _jsxFileName = \"/home/murilorsv21/Projects/sd-013-a-project-trivia-react-redux/src/pages/Gamepage.jsx\";\n// React\nimport React from 'react'; // PropTypes\n\nimport PropTypes from 'prop-types'; // Redux\n\nimport { connect } from 'react-redux';\nimport { pressQuestionBtn } from '../redux/actions/pressBtn'; // Children\n\nimport HeaderGame from '../components/HeaderGame';\nimport NextBtn from '../components/NextBtn'; // Styles\n\nimport '../styles/Gamepage.css';\n\nclass Gamepage extends React.Component {\n  constructor() {\n    super();\n    this.answerRandom = this.answerRandom.bind(this);\n    this.enableNextBtn = this.enableNextBtn.bind(this);\n    this.sendScoreToLocalStorage = this.sendScoreToLocalStorage.bind(this);\n  }\n\n  enableNextBtn() {\n    const enableNextBtnDispatch = this.props.enableNextBtnDispatch;\n    enableNextBtnDispatch();\n  }\n\n  sendScoreToLocalStorage({\n    target\n  }) {\n    if (target.className === 'incorrect-answer') {\n      return null;\n    } // const { timer } = this.state;\n    // const { games, questionNumber } = this.props;\n    // const { difficulty } = games[questionNumber];\n\n\n    const state = JSON.parse(localStorage.getItem('state'));\n    let score = state.score;\n    const defaultReward = 10;\n    score += defaultReward + difficulty * timer;\n    localStorage.JSON.stringify(score);\n  }\n\n  handleAnswerClick() {\n    // Adiciona estilo para a alternativa correta\n    const correta = document.querySelector('#correct-answer');\n    correta.classList.add('correct-highlight'); // Adiciona estilo para as alternativas incorretas\n\n    const incorretas = document.querySelectorAll('.incorrect-answer');\n    incorretas.forEach(el => el.classList.add('incorrect-highlight')); // Habilitar nova pergunta\n\n    this.enableNextBtn(); // Enviar score para o state do LocalStorage\n\n    this.sendScoreToLocalStorage();\n  }\n\n  answerRandom() {\n    const answers = [];\n    const _this$props = this.props,\n          games = _this$props.games,\n          questionNumber = _this$props.questionNumber;\n    const incorretas = games[questionNumber].incorrect_answers;\n    const correta = [games[questionNumber].correct_answer];\n    answers.push(...incorretas.map((answer, index) => React.createElement(\"button\", {\n      type: \"button\",\n      className: \"incorrect-answer\",\n      \"data-testid\": `wrong-answer-${index}`,\n      key: `wrong-answer-${index}`,\n      onClick: evt => this.handleAnswerClick(evt),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68\n      },\n      __self: this\n    }, answer)));\n    answers.push(...correta.map(answer => React.createElement(\"button\", {\n      type: \"button\",\n      id: \"correct-answer\",\n      \"data-testid\": \"correct-answer\",\n      key: \"correct-answer\",\n      onClick: evt => this.handleAnswerClick(evt),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80\n      },\n      __self: this\n    }, answer)));\n    return answers.map(value => ({\n      value,\n      sort: Math.random()\n    })).sort((a, b) => a.sort - b.sort).map(({\n      value\n    }) => value);\n  }\n\n  render() {\n    const _this$props2 = this.props,\n          games = _this$props2.games,\n          questionNumber = _this$props2.questionNumber;\n    const _games$questionNumber = games[questionNumber],\n          category = _games$questionNumber.category,\n          question = _games$questionNumber.question;\n    return React.createElement(\"section\", {\n      className: \"Gamepage\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    }, React.createElement(HeaderGame, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    }), \"Sou uma P\\xE1gina de game\", React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      \"data-testid\": \"question-category\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    }, category), React.createElement(\"p\", {\n      \"data-testid\": \"question-text\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }, question), this.answerRandom()), React.createElement(NextBtn, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }));\n  }\n\n}\n\nGamepage.propTypes = {\n  games: PropTypes.arrayOf(PropTypes.object).isRequired,\n  questionNumber: PropTypes.number.isRequired,\n  enableNextBtnDispatch: PropTypes.func.isRequired\n};\n\nconst mapStateToProps = state => ({\n  games: state.game.games,\n  questionNumber: state.game.question\n});\n\nconst mapDispatchToProps = dispatch => ({\n  enableNextBtnDispatch: () => dispatch(pressQuestionBtn())\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Gamepage);","map":{"version":3,"sources":["/home/murilorsv21/Projects/sd-013-a-project-trivia-react-redux/src/pages/Gamepage.jsx"],"names":["React","PropTypes","connect","pressQuestionBtn","HeaderGame","NextBtn","Gamepage","Component","constructor","answerRandom","bind","enableNextBtn","sendScoreToLocalStorage","enableNextBtnDispatch","props","target","className","state","JSON","parse","localStorage","getItem","score","defaultReward","difficulty","timer","stringify","handleAnswerClick","correta","document","querySelector","classList","add","incorretas","querySelectorAll","forEach","el","answers","games","questionNumber","incorrect_answers","correct_answer","push","map","answer","index","evt","value","sort","Math","random","a","b","render","category","question","propTypes","arrayOf","object","isRequired","number","func","mapStateToProps","game","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["// React\nimport React from 'react';\n\n// PropTypes\nimport PropTypes from 'prop-types';\n\n// Redux\nimport { connect } from 'react-redux';\nimport { pressQuestionBtn } from '../redux/actions/pressBtn';\n\n// Children\nimport HeaderGame from '../components/HeaderGame';\nimport NextBtn from '../components/NextBtn';\n\n// Styles\nimport '../styles/Gamepage.css';\n\nclass Gamepage extends React.Component {\n  constructor() {\n    super();\n\n    this.answerRandom = this.answerRandom.bind(this);\n    this.enableNextBtn = this.enableNextBtn.bind(this);\n    this.sendScoreToLocalStorage = this.sendScoreToLocalStorage.bind(this);\n  }\n\n  enableNextBtn() {\n    const { enableNextBtnDispatch } = this.props;\n    enableNextBtnDispatch();\n  }\n\n  sendScoreToLocalStorage({ target }) {\n    if (target.className === 'incorrect-answer') { return null; }\n    // const { timer } = this.state;\n    // const { games, questionNumber } = this.props;\n    // const { difficulty } = games[questionNumber];\n    const state = JSON.parse(localStorage.getItem('state'));\n    let { score } = state;\n    const defaultReward = 10;\n    score += defaultReward + difficulty * timer;\n    localStorage.JSON.stringify(score);\n  }\n\n  handleAnswerClick() {\n    // Adiciona estilo para a alternativa correta\n    const correta = document.querySelector('#correct-answer');\n    correta.classList.add('correct-highlight');\n\n    // Adiciona estilo para as alternativas incorretas\n    const incorretas = document.querySelectorAll('.incorrect-answer');\n    incorretas.forEach((el) => el.classList.add('incorrect-highlight'));\n\n    // Habilitar nova pergunta\n    this.enableNextBtn();\n\n    // Enviar score para o state do LocalStorage\n    this.sendScoreToLocalStorage();\n  }\n\n  answerRandom() {\n    const answers = [];\n    const { games, questionNumber } = this.props;\n    const incorretas = games[questionNumber].incorrect_answers;\n    const correta = [games[questionNumber].correct_answer];\n\n    answers.push(...incorretas\n      .map((answer, index) => (\n        <button\n          type=\"button\"\n          className=\"incorrect-answer\"\n          data-testid={ `wrong-answer-${index}` }\n          key={ `wrong-answer-${index}` }\n          onClick={ (evt) => this.handleAnswerClick(evt) }\n        >\n          {answer}\n\n        </button>)));\n    answers.push(...correta\n      .map((answer) => (\n        <button\n          type=\"button\"\n          id=\"correct-answer\"\n          data-testid=\"correct-answer\"\n          key=\"correct-answer\"\n          onClick={ (evt) => this.handleAnswerClick(evt) }\n        >\n          {answer}\n\n        </button>)));\n    return answers\n      .map((value) => ({ value, sort: Math.random() }))\n      .sort((a, b) => a.sort - b.sort)\n      .map(({ value }) => value);\n  }\n\n  render() {\n    const { games, questionNumber } = this.props;\n    const { category, question } = games[questionNumber];\n\n    return (\n      <section className=\"Gamepage\">\n        <HeaderGame />\n        Sou uma Página de game\n        <div>\n          <h3 data-testid=\"question-category\">\n            { category }\n          </h3>\n          <p data-testid=\"question-text\">\n            { question }\n          </p>\n          {this.answerRandom()}\n        </div>\n        <NextBtn />\n      </section>\n    );\n  }\n}\n\nGamepage.propTypes = {\n  games: PropTypes.arrayOf(PropTypes.object).isRequired,\n  questionNumber: PropTypes.number.isRequired,\n  enableNextBtnDispatch: PropTypes.func.isRequired,\n};\n\nconst mapStateToProps = (state) => ({\n  games: state.game.games,\n  questionNumber: state.game.question,\n});\n\nconst mapDispatchToProps = (dispatch) => ({\n  enableNextBtnDispatch: () => dispatch(pressQuestionBtn()),\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Gamepage);\n"]},"metadata":{},"sourceType":"module"}